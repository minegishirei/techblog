




AWS Lambdaとは

**必要な時に必要な文だけアプリケーションを実行することのできるサービスです。**
AWS Lambdaを使用した場合、必要なコードをAWSにアップロードし、自動的にスケーリング、モニタリング、管理が行われます。

AWS Lambdaは、イベント駆動型アプリケーション開発や、バックエンドサービスの作成、ウェブアプリケーション、デバイスからのデータストリーミングなど、様々な用途で利用されています。
AWS LambdaはAWSによって提供される多数のサービスとの統合も容易であり、コスト効率に優れているのがメリットです。
また、多数のプログラミング言語（JavaScript、Python、Java、C#、Goなど）をサポートしており、開発者は好きな言語を選択することができます。




## Lambda関数について

Lambdaのコンソール画面では、「デザイナー」「関数コード」「設定」の3つの画面から構成され、この画面を使用すると、Lambda関数を作成、構成、デプロイ、実行、モニタリングすることができます。

Lambda関数では以下の設定が可能です。


- 環境変数。（Linuxのような環境変数を設定できます）
- タグ。
- 実行ロール、メモリや言語、タイムアウトなどの基本設定
- モニタリングツール（ログとメトリクス、Cloudwatchでの確認を行える。デフォルトで有効）アクティブトレース（X-Rayによるデータ収集）
- VPC（Lambdaを配置するVPCのこと）
- ファイルシステム（Lambda関数がEFSによるファイルシステムのマウントが必要な場合に設定する）
- 同時接続数（Lambda関数が同時に実行するキャパシティを設定する。デフォルトでの設定は1000に設定されており、これを超えるとスロットリングエラーが発生する。
- 非同期呼び出し（リトライ数を設定する）
- データベースプロキシ（Lambda関数からRDSにアクセスする際に利用するRDS Proxyを設定する）




# LambdaをAWS Gatewayから呼び出す

Amazon API Gatewayは「web api」の作成や公開、管理を簡単に行うことができます。
インフラ管理が不要となっているため、利用者はサービスの開発に集中することができます。

### API Gatewayの用途

API Gatewayの利用目的は下記のパターンで使用されることが多いです。

- 動的Web/モバイルバックエンド
- 業務系API/グループ間API

API　Gatewayでは多数の機能が提供されています。

### Restfull API

RESTアーキテクチャとは、次の6つの制約に従うアーキテクチャのことです。

- クライアント/サーバーの分離：ユーザーインターフェースを高度に抽象化され、ほかのAPIと同様の形で呼び出せること
- ステートレス性：同じ入力で同じ出力が返されること。（サーバーの状態によって出力が変わらないことを意味する）
- キャッシュ
- 統一インターフェース
- 階層化されたシステム
- コードオンデマンド


### APIの種類

- Rest API:
  - 通常のHTTP APIに加えて次の内容を補填
    - Mockの作成
    - OpenAPI（Awagger）v2.0,3.0をサポートした定義ファイルからの作成
    - ステートレス通信（それまでの処理や通信の内容などのシステムの状態を記憶しない通信）にも対応
  - エンドポイントのタイプで以下の三種類から選べる
    - Cloudfront：Cloudfrontのエッジロケーションを使用して、クライアントを最寄りの接続ポイントにルーティングする
    - プライベートAPIエンドポイント：パブリックなインターネットから完全に分離、アクセス権限を持ったVPCエンドポイントからのみの接続が可能
    - リージョンエンドポイント：指定したリージョンにデプロイし、同一リージョン内のクライアントにサービスを提供する
- HTTP API
    - Lambda HTTPエンドポイント、AWSサービス、VPCリンクにリクエストを送信できる
    - Rest APIよりも軽量
    - ステートレス通信
- websocket API
    - Lambda API HTTPエンドポイント、Mock、AWSサービス、VPCリンクにリクエストを送信可能
    - ステートフル通信（それまでの処理や通信の内容などのシステムの情報を記憶する）なので、実行のタイミングで何が帰ってくるかが予測しずらい











