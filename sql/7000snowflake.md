







## 仮想ウェアハウスタイプ

- 標準
    - コンピュートクラスタは一つだけ
    - スケールアウトができない


- マルチクラスターウェアハウス（MCW)
    - 追加のコンピュートクラスタを生成可能せ。多くのユーザーと同時実効性のニーズに対応できる。


### 請求について

コンピュートクレジットはコンピューターの使用量に対する請求方式

一定数のクレジットを持っている場合（キャパシティ、前払い）

オンデマンド、クレジットの倍は毎月は毎月請求される


コンピュートクレジットは使用する仮想ウェア付すのかず、サイズ、使用量に依存する。

#### 請求についての注意事項

- 一部のコンピュートはクラウドサービスレイヤで動作する。
その場合は、クラウドサービスレイヤで課金される。
しかし、そこまでたくさん出てくる請求ではない。

**アカウントの合計コンピュートの10%を超える場合のみ、請求される**

- データウェアレイヤーで、に120クレジットの10％は12クレジット。

- クラウドサービスレイヤで、10クレジット発生した


## ウェアハウスのサイズ変更について

- 実行中でああってもサイズ変更は可能
 
- ALTER WAREHOUSEステートメントまたはUIを介して変更

ただし注意点

- 一時停止中のウェアハウスは、次の起動時に新しいサイズでかいし
- 実行中のウェアハウスは、実行中のクエリに影響を及ぼすことはできない、キュー待ちに入っていたクエリは新しいサイズで実行される。


## パフォーマンスのためにスケールをあげる

弾力性のある処理能力について

- **大きなデータセットに対して**複雑なクエリを実行する場合には、**大きなウェアハウスを用意するのは効果がある**
- ただし、大きなウェアハウスを用意しても**同時実効性が上がるものではない。**
- *同時実効性については、ウェアハウスのコンピュータークラスタの数を増減させることで対応可能。
  - MIN_CLUSTER_COUNT : 1~10
  - MAX_CLUSTER_COUNT : 1~10

WAREHOUSEのサンプルコードは以下の通り

```sql
ALTER WAREHOUSE [WAREHOUSE名]
    SET
    WAREHOUSE_SIZE = Small
    MAX_CLUSTER_COUNT = 3
```


## Snowflakeのクエリ結果取得キャッシュを無効にする方法

次のALTER文でキャッシュを無効にすることができる。

`ALTER SESSION SET USE_CACHED_RESULT = FALSE`



## Snowflakeの実行時間の調べ方

- **SQLを流した後、 *クエリID* が左下に出現する。**
その`クエリID`をクリックした後、左側のポップアップから実行時間が確認できる。その際に見るべき項目は、`期間の合計`

ここではポップアップ画面だけでなく、**そのクエリがキャッシュデータを使用したのかどうかを確認できる。**

- あるいは、`履歴` ページに表示されるクエリ情報からも確認が可能















