


## CIツールとは？

開発現場に入ると、よくCIツールだのCDツールだのが聞こえる。

これは何かといえば、**「継続的インテグレーションツール」**のことだ

CIは「Continuous integration」の略で、以下の意味がある


> 継続的インテグレーションは、開発者が自分のコード変更を定期的にセントラルリポジトリにマージし、その後に自動化されたビルドとテストを実行する DevOps ソフトウェア開発の手法です。

> 継続的インテグレーションという用語が最もよく使われるのは、ソフトウェアのリリースプロセスのビルド段階または統合段階を指す場合で、オートメーションの要素 (CI やビルドサービスなど) と啓発の要素 (頻繁に統合する必要性を学習することなど) の両方が含まれます。

> 継続的インテグレーションの主な目的は、バグを早期に発見して対処すること、ソフトウェアの品質を高めること、そしてソフトウェアの更新を検証してリリースするためにかかる時間を短縮することです。

https://aws.amazon.com/jp/devops/continuous-integration/


## アジャイル 継続的インテグレーションとは？

まとめると、**早い段階でバグを退治できるソフトウェアのリリースツール**のことである。

例えば、

- 後一時間で今までの開発資材をビルドして、バイナリをサーバーに配置して、デモの準備を行わなければならないとき。

あるいは、

- 何かしらのインシデントが発生したのでリグレッションを行わないといけないとき。

こんな場面で役に立つ。

## なぜビルドツールが必要なのか？

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">開発環境「もしかして…」<br>本番環境「私たち…」<br>開発環境・本番環境「「入れ替わってるー！？」」</p>&mdash; riferiru (@riferiru) <a href="https://twitter.com/riferiru/status/824055019519389696?ref_src=twsrc%5Etfw">January 25, 2017</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

例えばソフトウェアのデプロイでは以下のような失敗がありがちである。

- ヒューマンエラー

- タイプミス

- バグ

- 動作エラー

- 設定ファイルの誤り

- 開発環境


こうしたデプロイの失敗要因をできるだけなくす。

なくすことができなくともせめて把握することができるようにしたい。

## リリースに備える文化

そもそもリリースを想定した開発ができていなければCIツールは意味をなさない。

エクストリームプログラミングにも「プロジェクトの本番は初日から始まっている」と言う格言がある。

プロジェクトのコードは全て本番環境に置かれてるかのように扱うんだ。

アジャイルは繰り返しのリリースを好む。

何よりも「開発している時間よりリリース可能な時間が多い」と言う事実がチームに自信を与える。

プロジェクトのハンドルも大胆に切ることができるだろう。


## 継続的インテグレーションツールのセットアップ

継続的インテグレーションツールの準備は具体的には次の4つが必要だ。

- ソースコードリポジトリ

- チェックイン手順

- ビルドの自動化

- 作業単位を小さくしようとする姿勢

ソースコードリポジトリはGitのことだと思っていい（Subversionでもいいかもしれないが...）



## アジャイル+CIツールの修正の手順

- 最新のソースコードを取得する

自分の作業の前に、portalポジ取りから最新のコードを取得する。

コードぼビルドしてから、綺麗な状態であることを確認して作業開始。

- テストを変更する

本体の前にソースを変更するのは、目的を意識した改修を行い、変更箇所を最小限にするためだ。

- 変更を加える

- テストを実行する

自分の習性がコードベースを壊していないことを確認するために、テストを実行する。

テストは全て成功するはずだ。

- 作業中に発生した更新差分を取得する

きちんと作業できたと確信を持てたら、もう一度リポジトリから最新版を取得する。

作業中に他のメンバーがリポジトリを更新しているかもしれないからだ。

- 再度テストを実行する

他のメンバーの変更をマージした状態でもきちんと動くことを確認するために、もう一度テストを実行する。

- チェックイン

全てうまく行った。

ビルドできたし、テストも全部パスした。

安心してチェックインしよう。

## ビルドを大事にするときにするべきこと

チェックイン手順では、するべきこととするべきでないことがある。


- 手元のソースが最新版か？

- テストを全て実行する

- 定期的にチェックインする

- ビルドが壊れたら直す


## すべきでないこと

- ビルドを壊す

- ビルドが壊れていないのにチェックインする

- 失敗するテストをコメントアウトする

これらの行為は負債を積み重ねるだけで、「完了」とは呼べないものだ。


## ビルドの自動化

ビルド自動化ユーティリティを活用すると、単純で何度も繰り返し実行するタスクを自動化できる。

ツールを使用すると、指定したゴールに到達するために、正しく、指定した順序で、各タスクを実行するプロセスを計算してくれる。

<img src="https://www.softwaretestinghelp.com/wp-content/qa/uploads/2019/07/Introduction2.png">

今時のプログラミング言語であれば、ビルドを自動化するフレームワークが存在するはずだ（JavaならAntが、RubyならRakeがある）


## アジャイルにおける継続的インテグレーション


title:アジャイルにおける継続的インテグレーション

description:ビルド自動化ユーティリティを活用すると、単純で何度も繰り返し実行するタスクを自動化できる。今時のプログラミング言語であれば、ビルドを自動化するフレームワークが存在するはずだ（JavaならAntが、RubyならRakeがある）


img:https://eh-career.com/image/article_hub/40/41/140_01.jpg

category_script:True    



